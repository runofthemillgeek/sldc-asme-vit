$(function(){var e={$faqBtn:$("#openFaq"),$faqDetails:$(".faq-det"),$mainNav:$("main header:first-child"),$sideNav:$(".side-nav"),$mainHamburger:$(".hero .hamburger"),cachedScrollVal:0,$prevButton:$(".slide-nav .prev"),$nextButton:$(".slide-nav .next"),$slides:$(".slider-wrapper .panel"),currentSlide:0,$subForm:$("#sub-form"),init:function(){this.totalSlides=this.$slides.length,this.toggleFaq(),this.registerHandlers(),this.toggleNavFixed(),this.toggleSideNav(),$('<div class="overlay hidden"></div>').appendTo("body")},registerHandlers:function(){var e=this;this.$faqBtn.click(function(t){t.preventDefault(),e.toggleFaq()}),$(window).scroll(function(t){e.toggleNavFixed(),e.navAutoHide(e.cachedScrollVal),e.cachedScrollVal=$(window).scrollTop()}),$(".to-top").click(function(){$("body").animate({scrollTop:0},500)}),$(".hamburger").click(function(){e.toggleSideNav()}),$(document).click(function(t){0===$(t.target).closest($(".hamburger")).length&&0===$(t.target).closest(e.$sideNav).length&&e.closeSideNav()}),this.$nextButton.click(function(t){e.nextSlide()}),this.$prevButton.click(function(t){e.prevSlide()}),this.$sideNav.find(".nav-contents li:not(:last-child) a").click(function(t){t.preventDefault();var a=t.target.href.split("#")[1];console.log(a),0!==$("#"+a).length&&e.scrollToId(a)}),this.registerFormChangeHandlers(),this.$subForm.on("submit",function(t){t.preventDefault(),$btn=e.$subForm.find(".cs-button"),e.validateForm()&&(e.$subForm.find("input, button").each(function(){$(this).prop("disabled",!0)}),$btn.html('<span class="fa fa-spinner"></span>'),$.ajax({url:e.$subForm.attr("action"),method:"POST",dataType:"json",data:{fname:e.$subForm.get(0).fname.value,lname:e.$subForm.get(0).lname.value,email:e.$subForm.get(0).email.value}}).done(function(e){"subscribed"===e.status&&$btn.find(".fa").hide(function(){$this.remove(),$('<span class="fa fa-check"></span>').hide().appendTo($btn).fadeIn()})}).fail(function(){console.log("Trouble connecting.")}))})},validateForm:function(){var e=this.$subForm.find('[name="fname"]'),t=this.$subForm.find('[name="lname"]'),a=this.$subForm.find('[name="email"]'),i=!0;return this.validateName(e.val())?e.next(".fa").addClass("hide"):(e.next(".fa").removeClass("hide"),i=!1),this.validateName(t.val())?t.next(".fa").addClass("hide"):(t.next(".fa").removeClass("hide"),i=!1),this.validateEmail(a.val())?a.next(".fa").addClass("hide"):(a.next(".fa").removeClass("hide"),i=!1),i},validateName:function(e){return/^[a-zA-Z]+$/.test(e)},validateEmail:function(e){return/^[a-z0-9]+[_a-z0-9\.-]*[a-z0-9]+@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/.test(e)},registerFormChangeHandlers:function(){var e=this,t=$('<span class="fa fa-exclamation-circle hide"></span>'),a=this.$subForm.find('[name="fname"]'),i=this.$subForm.find('[name="lname"]'),n=this.$subForm.find('[name="email"]');a.after(t.clone()),i.after(t.clone()),n.after(t.clone()),a.change(function(){var t=$(this);e.validateName(t.val())?t.next(".fa").addClass("hide"):t.next(".fa").removeClass("hide")}),i.change(function(){var t=$(this);e.validateName($(this).val())?t.next(".fa").addClass("hide"):t.next(".fa").removeClass("hide")}),n.change(function(){var t=$(this);e.validateEmail($(this).val())?t.next(".fa").addClass("hide"):t.next(".fa").removeClass("hide")})},toggleFaq:function(){this.$faqDetails.slideToggle()},toggleNavFixed:function(){var e=this;$(window).scrollTop()>=$("main").offset().top?e.$mainNav.hasClass("cs-fixed-top")||e.$mainNav.addClass("cs-fixed-top"):e.$mainNav.hasClass("cs-fixed-top")&&e.$mainNav.removeClass("cs-fixed-top")},navAutoHide:function(e){var t=$(window).scrollTop();t>=$(".competitions").offset().top?t<=e?this.$mainNav.removeClass("cs-nav-slideup"):0!==this.$mainNav.height()&&this.$mainNav.addClass("cs-nav-slideup"):this.$mainNav.removeClass("cs-nav-slideup")},toggleSideNav:function(){$(".hamburger").toggleClass("hb-close"),$(".overlay").toggleClass("hidden"),this.$sideNav.toggleClass("cs-snav-closed"),this.$sideNav.hasClass("cs-snav-closed")?this.$mainHamburger.css({position:"absolute"}):this.$mainHamburger.css({position:"fixed"})},closeSideNav:function(){$(".hamburger").removeClass("hb-close"),$(".overlay").addClass("hidden"),this.$sideNav.addClass("cs-snav-closed"),this.$mainHamburger.css({position:"absolute"})},nextSlide:function(){var e=this.currentSlide,t=this.$slides.eq(e);if(e+1<this.totalSlides){t.addClass("cs-left"),t.one("animationend",function(){t.removeClass("cs-current")});var a=this.$slides.eq(e+1);a.addClass("cs-current"),this.currentSlide++}},prevSlide:function(){var e=this.currentSlide,t=this.$slides.eq(e);if(e-1>=0){t.removeClass("cs-current");var a=this.$slides.eq(e-1);a.css({transform:"translateX(-100%) scale(0.7)"}),a.removeClass("cs-left"),a.addClass("cs-current"),a.one("animationend",function(){a.css({transform:""})}),this.currentSlide--}},scrollToId:function(e){var t=$("#"+e);console.log(t);var a=t.offset().top;console.log(a),$("body").animate({scrollTop:a},500),this.toggleSideNav()}};e.init(),function(){var e,t,a,i,n,s,o,r,l,d,h,c,u;a=document.getElementById("cs-bg"),s=a.getContext("2d"),r=4,o=a.width=window.innerWidth/r,i=a.height=window.innerHeight/r,h=2*Math.PI,t=[],d=30,l=0,c=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},e=function(e,t){return this.x=e,this.y=t,this.r=.1,this.rGrowthBase=1,this.rGrowth=this.rGrowthBase,this.rMax=(o+i)/7,this.alpha=1},e.prototype.update=function(e){var a;if(a=(this.rMax-this.r)/this.rMax,this.rGrowth=.1+this.rGrowthBase*a,this.r+=this.rGrowth,this.alpha=a,this.r>this.rMax)return t.splice(e,1)},e.prototype.render=function(e){return s.beginPath(),s.arc(this.x,this.y,this.r,0,h,!1),s.fillStyle="hsla("+c(l-80,l+80)+", 50%, 0.4%, "+this.alpha+")",s.fill()},n=function(){return s.globalCompositeOperation="destination-out",s.fillStyle="hsla(0, 0%, 0%, .05)",s.fillRect(0,0,o,i),s.globalCompositeOperation="lighter"},u=function(){var s;for(window.requestAnimationFrame(u,a),n(),s=t.length;s--;)t[s].update(s);for(s=t.length;s--;)t[s].render(s);return t.push(new e(c(0,o),c(0,i))),l++},$(window).on("resize",function(){return o=a.width=window.innerWidth/r,i=a.height=window.innerHeight/r}),window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return window.setTimeout(function(){return e(+new Date)},1e3/60)}),u()}.call(this)});